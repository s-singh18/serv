{% extends "servapp/nav.html" %}

{% load static %}

{% block body %}
    <h1 class="listing-title">{{ listing.title|title }}</h1>
    <h3 class="listing-owner">{{ listing.user }}</h3>
    <h4 class="listing-service-type">{{ listing.service_type }}</h4>
    <hr>
    <h6 class="listing-rate">{{ listing.rate }}/hr</h6>
    <p class="listing-description">{{ listing.description }}</p>
    <div class="create-review">
        <hr>
        {% if user.is_authenticated and user.username != listing.owner %}
            <form id='review-form' method="POST" action="{% url 'service' listing.title%}">
                {% csrf_token %}
                <label for="stars">Stars:</label>
                <select name="stars" id="stars">
                    <option value="5">5</option>
                    <option value="4">4</option>
                    <option value="3">3</option>
                    <option value="2">2</option>
                    <option value="1">1</option>
                </select>
                <textarea class="form-control" id="review-text" name="text" placeholder="Write a review..."></textarea>
                <input class="form-control" type="hidden" name="username" id="username" value="{{ user.username }}">
                <input class="btn btn-primary" type="submit" value="Submit">
            </form>
            <hr>
        {% endif %}
        <div class="reviews">
            {% for review in reviews %}
                <div class="review">
                    <h3>{{ review.user }}</h3>
                    <h6>{{ review.stars }} Stars</h6>
                    <p>{{ review.text }}</p>
                    <hr>
                </div>
            {% empty %}
                <h3>No reviews for {{ listing.title|title }}</h3>
            {% endfor %}
        </div>
    </div>
    <hr>

{% endblock %}

{% block script %}
    <!-- <script src="{% static 'servapp/service.js' %}"></script> -->
{% endblock %}